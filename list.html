<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Games Library</title>

  <!-- THEME PRELOAD: run before CSS paints to avoid flash -->
  <script>
    (function() {
      try {
        var stored = localStorage.getItem('theme') || localStorage.getItem('sypher-theme');
        if (!stored) {
          stored = (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) ? 'dark' : 'light';
        }
        document.documentElement.setAttribute('data-theme', stored);
      } catch (e) {}
      document.documentElement.classList.add('theme-ready');
    })();
  </script>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <style>
    html { visibility: hidden; }
    html.theme-ready { visibility: visible; }

    :root {
      --primary: #8b7aff;
      --primary-dark: #7461e6;
      --text: #1d1d1f;
      --text-secondary: #6e6e73;
      --bg: #f5f5f7;
      --card-bg: #ffffff;
      --border: rgba(0,0,0,0.06);
      --shadow: 0 2px 16px rgba(0,0,0,0.08);
      --shadow-hover: 0 8px 32px rgba(139,122,255,0.15);
      --radius: 18px;
    }

    [data-theme="dark"] {
      --primary: #a592ff;
      --primary-dark: #8b7aff;
      --text: #f5f5f7;
      --text-secondary: #a1a1a6;
      --bg: #000000;
      --card-bg: #1c1c1e;
      --border: rgba(255,255,255,0.1);
      --shadow: 0 2px 16px rgba(0,0,0,0.4);
      --shadow-hover: 0 8px 32px rgba(165,146,255,0.25);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
    }

    body {
      background: var(--bg);
      color: var(--text);
      padding: 32px 20px;
      min-height: 100vh;
      transition: background 0.3s, color 0.3s;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }


    /* Search Bar */
    .search-container {
      margin-bottom: 32px;
    }

    .search-box {
      position: relative;
      max-width: 600px;
      margin: 0 auto;
    }

    .search-input {
      width: 100%;
      padding: 14px 20px 14px 48px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: var(--card-bg);
      color: var(--text);
      font-size: 16px;
      transition: all 0.3s;
      box-shadow: var(--shadow);
    }

    .search-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(139, 122, 255, 0.1);
    }

    .search-icon {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      width: 20px;
      height: 20px;
      stroke: var(--text-secondary);
    }

    /* Recently Played Section */
    .section {
      margin-bottom: 48px;
      display: none;
    }

    .section.show {
      display: block;
    }

    .section-title {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 20px;
      letter-spacing: -0.5px;
    }

    .horizontal-scroll {
      display: flex;
      gap: 16px;
      overflow-x: auto;
      padding-bottom: 16px;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    .horizontal-scroll::-webkit-scrollbar {
      display: none;
    }

    /* Categories */
    .categories {
      display: flex;
      gap: 12px;
      margin-bottom: 36px;
      overflow-x: auto;
      padding-bottom: 8px;
      scrollbar-width: none;
    }

    .categories::-webkit-scrollbar {
      display: none;
    }

    .category-btn {
      padding: 10px 20px;
      border-radius: 24px;
      border: 1.5px solid var(--border);
      background: var(--card-bg);
      color: var(--text-secondary);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .category-btn:hover {
      border-color: var(--primary);
      color: var(--text);
    }

    .category-btn.active {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
      box-shadow: 0 4px 12px rgba(139, 122, 255, 0.3);
    }

    .heart-icon {
      width: 16px;
      height: 16px;
      fill: currentColor;
    }

    /* Games Grid */
    .games-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
    }

    /* Game Card */
    .game-card {
      position: relative;
      height: 340px;
      border-radius: var(--radius);
      background: var(--card-bg);
      border: 1px solid var(--border);
      overflow: hidden;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: var(--shadow);
    }

    .game-card:hover {
      transform: translateY(-6px);
      box-shadow: var(--shadow-hover);
      border-color: var(--primary);
    }

    .game-card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.7) 100%);
      z-index: 1;
    }

    .game-bg {
      position: absolute;
      inset: 0;
      background-size: cover;
      background-position: center;
      transition: transform 0.4s;
    }

    .game-card:hover .game-bg {
      transform: scale(1.08);
    }

    .game-content {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 24px;
      z-index: 2;
    }

    .game-name {
      font-size: 24px;
      font-weight: 700;
      color: white;
      margin-bottom: 6px;
      letter-spacing: -0.5px;
    }

    .game-category {
      font-size: 13px;
      font-weight: 600;
      color: rgba(255,255,255,0.8);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Favorite Button */
    .favorite-btn {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255,255,255,0.2);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 3;
      transition: all 0.3s;
    }

    .favorite-btn:hover {
      transform: scale(1.1);
      background: rgba(255,255,255,0.3);
    }

    .favorite-btn svg {
      width: 20px;
      height: 20px;
      stroke: white;
      fill: none;
      transition: all 0.3s;
    }

    .favorite-btn.active svg {
      fill: #ff3b30;
      stroke: #ff3b30;
    }

    .favorite-btn .heart-pop {
      position: absolute;
      width: 32px;
      height: 32px;
      animation: heartPop 0.6s ease-out;
      pointer-events: none;
    }

    @keyframes heartPop {
      0% {
        transform: scale(1);
        opacity: 1;
      }
      50% {
        transform: scale(1.8);
      }
      100% {
        transform: scale(2.5);
        opacity: 0;
      }
    }

    .no-results {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-secondary);
      font-size: 18px;
    }

    /* Horizontal scroll card */
    .horizontal-card {
      min-width: 320px;
      height: 200px;
      position: relative;
      border-radius: 16px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: var(--shadow);
    }

    .horizontal-card:hover {
      transform: scale(1.03);
      box-shadow: var(--shadow-hover);
    }

    .horizontal-card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.7) 100%);
      z-index: 1;
    }

    .horizontal-card .game-bg {
      position: absolute;
      inset: 0;
      background-size: cover;
      background-position: center;
    }

    .horizontal-card .game-content {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 20px;
      z-index: 2;
    }

    .horizontal-card .game-name {
      font-size: 20px;
      margin-bottom: 4px;
    }

    .horizontal-card .game-category {
      font-size: 12px;
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- Search Bar -->
    <div class="search-container">
      <div class="search-box">
        <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.3-4.3"></path>
        </svg>
        <input type="text" id="searchInput" class="search-input" placeholder="Search games..." />
      </div>
    </div>

    <!-- Recently Played Section -->
    <div id="recentSection" class="section">
      <h2 class="section-title">Recently Played</h2>
      <div id="recentlyPlayedScroll" class="horizontal-scroll"></div>
    </div>

    <!-- Categories -->
    <div id="categories" class="categories">
      <button class="category-btn" data-category="favorites">
        <svg class="heart-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
        </svg>
      </button>
      <button class="category-btn active" data-category="all">All</button>
      <button class="category-btn" data-category="Shooting">Shooting</button>
      <button class="category-btn" data-category="Racing">Racing</button>
      <button class="category-btn" data-category="Sports">Sports</button>
      <button class="category-btn" data-category="Adventure">Adventure</button>
      <button class="category-btn" data-category="Puzzle">Puzzle</button>
      <button class="category-btn" data-category="Action">Action</button>
      <button class="category-btn" data-category="Horror">Horror</button>
    </div>

    <!-- Games Grid -->
    <div id="gamesGrid" class="games-grid"></div>
  </div>

  <script>
    // ═══════════════════════════════════════════════════════════════
    // TO ADD A NEW GAME: Just add one entry here with name, path, category, and image filename!
    // Image should be placed in: public/images/games/your-image-name.jpg
    // ═══════════════════════════════════════════════════════════════
    const games = [
      { name: "A Small World Cup", path: "/a-small-world-cup/", category: "Sports", image: "a-small-world-cup.jpg" },
      { name: "Bitlife", path: "/bitlife/", category: "Adventure", image: "bitlife.jpg" },
      { name: "BlockBlast", path: "/BlockBlast/", category: "Puzzle", image: "blockblast.jpg" },
      { name: "Blockpost", path: "/blockpost/", category: "Shooting", image: "blockpost.jpg" },
      { name: "Chrome Dino", path: "/chrome-dino/", category: "Action", image: "chrome-dino.jpg" },
      { name: "Cookie Clicker", path: "/cookieclicker/", category: "Puzzle", image: "cookie-clicker.jpg" },
      { name: "Crossy Road", path: "/crossyroad/", category: "Action", image: "crossy-road.jpg" },
      { name: "Drift Boss", path: "/drift-boss/", category: "Racing", image: "drift-boss.jpg" },
      { name: "Drift Hunters", path: "/drift-hunters/", category: "Racing", image: "drift-hunters.jpg" },
      { name: "Drive Mad", path: "/drivemad/", category: "Racing", image: "drive-mad.jpg" },
      { name: "Duck Life 1", path: "/ducklife1/", category: "Sports", image: "duck-life-1.jpg" },
      { name: "Duck Life 2", path: "/ducklife2/", category: "Sports", image: "duck-life-2.jpg" },
      { name: "Duck Life 3", path: "/ducklife3/", category: "Sports", image: "duck-life-3.jpg" },
      { name: "Duck Life 4", path: "/ducklife4/", category: "Sports", image: "duck-life-4.jpg" },
      { name: "Eggy Car", path: "/eggycar/", category: "Racing", image: "eggy-car.jpg" },
      { name: "FNAF", path: "/fnaf/", category: "Horror", image: "fnaf.jpg" },
      { name: "FNAF 2", path: "/fnaf2/", category: "Horror", image: "fnaf-2.jpg" },
      { name: "FNAF 3", path: "/fnaf3/", category: "Horror", image: "fnaf-3.jpg" },
      { name: "FNAF 4", path: "/fnaf4/", category: "Horror", image: "fnaf-4.jpg" },
      { name: "Getaway Shootout", path: "/getaway-shootout/", category: "Shooting", image: "getaway-shootout.jpg" },
      { name: "Google Snake", path: "/google-snake/", category: "Action", image: "google-snake.jpg" },
      { name: "Hole IO", path: "/hole-io/", category: "Action", image: "hole-io.jpg" },
      { name: "Level Devil 2 Poki", path: "/level-devil-2-poki/", category: "Adventure", image: "level-devil-2-poki.jpg" },
      { name: "Level Devil Poki", path: "/level-devil-poki/", category: "Adventure", image: "level-devil-poki.jpg" },
      { name: "Monkey Mart", path: "/monkeymart/", category: "Adventure", image: "monkey-mart.jpg" },
      { name: "Moto X3M", path: "/motox3m/", category: "Racing", image: "moto-x3m.jpg" },
      { name: "Moto X3M Pool", path: "/motox3m-pool/", category: "Racing", image: "moto-x3m-pool.jpg" },
      { name: "Moto X3M Spooky", path: "/motox3m-spooky/", category: "Racing", image: "moto-x3m-spooky.jpg" },
      { name: "Moto X3M Winter", path: "/motox3m-winter/", category: "Racing", image: "moto-x3m-winter.jpg" },
      { name: "Paper IO 2", path: "/paperio2/", category: "Action", image: "paper-io-2.jpg" },
      { name: "Rocket League", path: "/Rocket-League/", category: "Sports", image: "rocket-league.jpg" },
      { name: "Rooftop Snipers", path: "/rooftop-snipers/", category: "Shooting", image: "rooftop-snipers.jpg" },
      { name: "Slope", path: "/slope/", category: "Action", image: "slope.jpg" },
      { name: "Slope 2", path: "/slope2/", category: "Action", image: "slope-2.jpg" },
      { name: "Slope 3", path: "/slope3/", category: "Action", image: "slope-3.jpg" },
      { name: "Snow Rider 3D", path: "/snowrider3d/", category: "Racing", image: "snow-rider-3d.jpg" },
      { name: "Stickman Hook", path: "/stickman-hook/", category: "Action", image: "stickman-hook.jpg" },
      { name: "Subway Surfers NY", path: "/subway-surfers-ny/", category: "Action", image: "subway-surfers-ny.jpg" },
      { name: "Tank Trouble 2", path: "/tank-trouble-2/", category: "Shooting", image: "tank-trouble-2.jpg" },
      { name: "Temple Run 2", path: "/temple-run-2/", category: "Adventure", image: "temple-run-2.jpg" },
      { name: "Time Shooter 1", path: "/timeshooter1/", category: "Shooting", image: "time-shooter-1.jpg" },
      { name: "Time Shooter 2", path: "/timeshooter2/", category: "Shooting", image: "time-shooter-2.jpg" },
      { name: "Time Shooter 3", path: "/timeshooter3/", category: "Shooting", image: "time-shooter-3.jpg" },
      { name: "Tiny Fishing", path: "/tinyfishing/", category: "Puzzle", image: "tiny-fishing.jpg" },
      { name: "Tomb of the Mask Web", path: "/tomb-of-the-mask-web/", category: "Adventure", image: "tomb-of-the-mask-web.jpg" },
      { name: "Zombs Royale", path: "/zombs-royale/", category: "Shooting", image: "zombs-royale.jpg" },
      { name: "Super Mario 64", path: "/super-mario/", category: "Adventure", image: "super-mario-64.jpg" },
      { name: "Sonic the Hedgehog Remastered", path: "/sonic-the-hedgehog-remastered/", category: "Action", image: "sonic-the-hedgehog-remastered.jpg" },
      { name: "Super Star Car", path: "/super-star-car/", category: "Racing", image: "super-star-car.jpg" },
      { name: "Recoil", path: "/recoil/", category: "Shooting", image: "recoil.jpg" }
    ];

    const gamesGrid = document.getElementById('gamesGrid');
    const searchInput = document.getElementById('searchInput');
    const recentSection = document.getElementById('recentSection');
    const recentlyPlayedScroll = document.getElementById('recentlyPlayedScroll');
    
    let currentCategory = 'all';
    let favorites = JSON.parse(localStorage.getItem('gameFavorites') || '[]');
    let recentlyPlayed = JSON.parse(localStorage.getItem('recentlyPlayed') || '[]');

    // Create game card
    function createGameCard(game, isHorizontal = false) {
      const isFav = favorites.includes(game.name);
      
      const card = document.createElement('div');
      card.className = isHorizontal ? 'horizontal-card' : 'game-card';
      
      const bgImage = `/images/games/${game.image}`;
      
      card.innerHTML = `
        <div class="game-bg" style="background-image: url('${bgImage}')"></div>
        ${!isHorizontal ? `
          <button class="favorite-btn ${isFav ? 'active' : ''}" onclick="toggleFavorite(event, '${game.name}')">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
          </button>
        ` : ''}
        <div class="game-content">
          <h3 class="game-name">${game.name}</h3>
          <p class="game-category">${game.category}</p>
        </div>
      `;
      
      card.onclick = (e) => {
        if (!e.target.closest('.favorite-btn')) {
          playGame(game);
        }
      };
      
      return card;
    }

    // Toggle favorite
    function toggleFavorite(event, gameName) {
      event.stopPropagation();
      const btn = event.currentTarget;
      const index = favorites.indexOf(gameName);
      
      if (index > -1) {
        favorites.splice(index, 1);
        btn.classList.remove('active');
      } else {
        favorites.push(gameName);
        btn.classList.add('active');
        
        // Heart animation
        const heartPop = document.createElement('svg');
        heartPop.className = 'heart-pop';
        heartPop.innerHTML = '<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" fill="#ff3b30" stroke="#ff3b30"/>';
        heartPop.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
        heartPop.setAttribute('viewBox', '0 0 24 24');
        btn.appendChild(heartPop);
        setTimeout(() => heartPop.remove(), 600);
      }
      
      localStorage.setItem('gameFavorites', JSON.stringify(favorites));
      
      if (currentCategory === 'favorites') {
        displayGames(getFilteredGames());
      }
    }

    // Play game
    function playGame(game) {
      // Add to recently played
      const index = recentlyPlayed.findIndex(g => g.name === game.name);
      if (index > -1) {
        recentlyPlayed.splice(index, 1);
      }
      recentlyPlayed.unshift(game);
      recentlyPlayed = recentlyPlayed.slice(0, 10);
      localStorage.setItem('recentlyPlayed', JSON.stringify(recentlyPlayed));
      
      // Navigate to game
      window.location.href = game.path;
    }

    // Display games
    function displayGames(gamesToShow) {
      gamesGrid.innerHTML = '';
      
      if (!gamesToShow || gamesToShow.length === 0) {
        gamesGrid.innerHTML = '<div class="no-results">No games found</div>';
        return;
      }
      
      const sortedGames = gamesToShow.sort((a, b) => a.name.localeCompare(b.name));
      sortedGames.forEach(game => {
        gamesGrid.appendChild(createGameCard(game));
      });
    }

    // Display recently played
    function displayRecentlyPlayed() {
      if (recentlyPlayed.length === 0) {
        recentSection.classList.remove('show');
        return;
      }
      
      recentSection.classList.add('show');
      recentlyPlayedScroll.innerHTML = '';
      
      recentlyPlayed.forEach(game => {
        recentlyPlayedScroll.appendChild(createGameCard(game, true));
      });
    }

    // Get filtered games
    function getFilteredGames() {
      if (currentCategory === 'all') {
        return games;
      } else if (currentCategory === 'favorites') {
        return games.filter(g => favorites.includes(g.name));
      } else {
        return games.filter(g => g.category === currentCategory);
      }
    }

    // Search functionality
    searchInput.addEventListener('input', (e) => {
      const searchTerm = e.target.value.toLowerCase();
      const filtered = getFilteredGames().filter(g => 
        g.name.toLowerCase().includes(searchTerm)
      );
      displayGames(filtered);
    });

    // Category buttons
    document.querySelectorAll('.category-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        currentCategory = btn.dataset.category;
        searchInput.value = '';
        displayGames(getFilteredGames());
      });
    });

    // Initialize
    displayGames(games);
    displayRecentlyPlayed();
  </script>
</body>
</html>
